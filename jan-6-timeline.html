<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The American Constitutional Crisis: 2020-2026</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --timeline-line: #dee2e6;
            --accent-blue: #0d6efd;
            --accent-red: #dc3545;
            --accent-gold: #ffc107;
            --card-bg: #ffffff;
            --sidebar-bg: #f1f3f5;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- Header --- */
        header {
            background: #fff;
            border-bottom: 1px solid #ccc;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            flex-shrink: 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .header-title h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        .header-title p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }

        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        button {
            padding: 8px 16px;
            border: 1px solid #ccc;
            background: #fff;
            cursor: pointer;
            border-radius: 4px;
            font-weight: 600;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        button:hover {
            background: #eee;
        }

        button.active {
            background: var(--accent-blue);
            color: white;
            border-color: var(--accent-blue);
        }

        #playPauseBtn {
            min-width: 90px;
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        #playPauseBtn.active {
            background: var(--accent-blue);
            color: white;
        }

        /* --- Main Layout --- */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        /* Timeline Lane (Left/Center) */
        .timeline-container {
            flex: 2;
            overflow-y: auto;
            padding: 40px;
            position: relative;
            scroll-behavior: auto;
        }

        .phase-marker {
            text-align: center;
            margin: 100px 0 60px 0;
            padding: 30px;
            background: #343a40;
            color: white;
            border-radius: 8px;
            font-size: 1.4rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            z-index: 2;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .timeline-item {
            position: relative;
            padding-left: 60px;
            margin-bottom: 50px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            transition: opacity 0.5s;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: -50px;
            width: 2px;
            background: var(--timeline-line);
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            left: 5px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-blue);
            border: 3px solid white;
            box-shadow: 0 0 0 2px var(--accent-blue);
            z-index: 1;
        }

        .timeline-item.minute-item::after {
            background: var(--accent-red);
            box-shadow: 0 0 0 2px var(--accent-red);
        }

        .timeline-item.future-item::after {
            background: var(--accent-gold);
            box-shadow: 0 0 0 2px var(--accent-gold);
        }

        .timeline-date {
            font-size: 0.85rem;
            text-transform: uppercase;
            color: #666;
            margin-bottom: 8px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .timeline-card {
            background: var(--card-bg);
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .timeline-item.active-focus .timeline-card {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 4px rgba(13, 110, 253, 0.15);
            transform: scale(1.01);
        }

        .timeline-card h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.2rem;
        }

        .timestamp-badge {
            background: #212529;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-family: 'Courier New', monospace;
            vertical-align: middle;
            margin-right: 10px;
            font-weight: bold;
        }

        /* --- Sidebar / Context Rail --- */
        .context-rail {
            flex: 1.2;
            background: var(--sidebar-bg);
            border-left: 1px solid #dee2e6;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            max-width: 500px;
            min-width: 350px;
        }

        .context-sticky {
            position: sticky;
            top: 30px;
            width: 100%;
        }

        .context-image-container {
            width: 100%;
            max-height: 400px;
            background: #e9ecef;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            display: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .context-image-container img {
            width: 100%;
            height: auto;
            display: block;
            object-fit: contain;
        }

        .image-caption {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            font-size: 0.8rem;
            text-align: right;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .insight-card {
            background: white;
            border-left: 6px solid var(--accent-red);
            padding: 25px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .insight-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .insight-header {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--accent-red);
            font-weight: 800;
            margin-bottom: 15px;
            letter-spacing: 1px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .insight-box {
            margin-bottom: 20px;
        }

        .insight-box:last-child {
            margin-bottom: 0;
        }

        .insight-box h5 {
            margin: 0 0 6px 0;
            font-size: 0.85rem;
            color: #6c757d;
            text-transform: uppercase;
        }

        .insight-box p {
            margin: 0;
            font-size: 1rem;
            line-height: 1.5;
            color: #212529;
        }

        .knew-box p {
            font-weight: 500;
        }

        .did-box p {
            font-weight: 700;
            color: #000;
        }

        footer {
            padding: 60px 40px;
            background: #fff;
            border-top: 1px solid #ccc;
            font-size: 0.9rem;
            color: #666;
        }

        .source-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .kb-hint {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(33, 37, 41, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            pointer-events: none;
            opacity: 0.8;
            z-index: 2000;
        }
    </style>
</head>

<body>

    <header>
        <div class="header-title">
            <h1>The Crisis: 2020 - 2026</h1>
            <p>A Definitive Chronology of the Era of Retributive Governance</p>
        </div>
        <div class="controls">
            <button onclick="jumpTo('phase1')">The Fabrication</button>
            <button onclick="jumpTo('phase2')">The Attack</button>
            <button onclick="jumpTo('phase3')">Aftermath & Reversal</button>
            <div style="width: 1px; height: 20px; background: #ccc; margin: 0 10px;"></div>
            <button id="playPauseBtn" onclick="togglePlay()">▶ Play</button>
        </div>
    </header>

    <div class="main-container">
        <div class="timeline-container" id="scroller">

            <div id="phase1" class="phase-marker">Phase 1: The Fabrication<br><span
                    style="font-size:0.9rem; font-weight:400; opacity:0.8;">Nov 3, 2020 - Jan 5, 2021</span></div>
            <div id="timeline-p1"></div>

            <div id="phase2" class="phase-marker" style="background: var(--accent-red);">Phase 2: The Attack<br><span
                    style="font-size:0.9rem; font-weight:400; opacity:0.8;">January 6, 2021 (Minute-by-Minute)</span>
            </div>
            <div id="timeline-p2"></div>

            <div id="phase3" class="phase-marker" style="background: #6610f2;">Phase 3: The Reversal<br><span
                    style="font-size:0.9rem; font-weight:400; opacity:0.8;">Jan 7, 2021 - June 2026</span></div>
            <div id="timeline-p3"></div>

            <footer>
                <h3>References & Source Material</h3>
                <div class="source-list" id="source-list"></div>
            </footer>
        </div>

        <div class="context-rail">
            <div class="context-sticky">

                <div id="ctx-img-box" class="context-image-container">
                    <img id="ctx-img" src="" alt="Historical Context">
                    <div class="image-caption" id="ctx-caption"></div>
                </div>

                <div id="insight-container">
                    <div style="text-align: center; color: #adb5bd; margin-top: 100px;">
                        <p style="font-size: 1.1rem; margin-bottom: 10px;">Waiting for Timeline...</p>
                        <p style="font-size: 0.9rem;">As events scroll, context on what figures <strong>KNEW</strong> vs
                            what they <strong>DID</strong> will appear here.</p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="kb-hint">Press <strong>SPACE</strong> to Play/Pause &middot; Use <strong>⬇/⬆</strong> to Scrub</div>

    <script>
        const timelineData = [
            // --- PHASE 1: LEAD UP ---
            {
                id: 'nov3', phase: 1, date: 'Nov 3-4, 2020',
                title: 'Election Night & The "Red Mirage"',
                text: 'Analysts had briefed Trump on the "Red Mirage"—early returns favoring him before mail-in ballots (Democrat-heavy) were counted. Ignoring his data team\'s warning that the path to victory was closed, Trump appears in the East Room at 2:30 AM to declare premature victory and demand "all voting stop."',
                insight: {
                    who: 'Donald Trump',
                    knew: 'Campaign data experts informed him the "Red Mirage" would fade and his mathematical path to victory was closed.',
                    did: 'Declared victory anyway and framed the legitimate counting of ballots as disenfranchisement.'
                }
            },
            {
                id: 'nov7', phase: 1, date: 'Nov 7, 2020',
                title: 'Election Called; The "Big Lie" Begins',
                text: 'Networks project Joe Biden as the winner. Immediately, Trump tweets "I WON THIS ELECTION, BY A LOT!". Simultaneously, Rudy Giuliani holds a press conference at Four Seasons Total Landscaping, claiming widespread fraud to delegitimize the incoming administration.',
                insight: {
                    who: 'Rudy Giuliani',
                    knew: 'There was no evidence of widespread fraud.',
                    did: 'Launched a PR campaign at a landscaping business to undermine public faith in the election results.'
                }
            },
            {
                id: 'nov18', phase: 1, date: 'Nov 18, 2020',
                title: 'The Chesebro Memos',
                text: 'Attorney Kenneth Chesebro sends a memo to the Trump campaign in Wisconsin, laying the intellectual groundwork for the "fake electors" scheme. It proposes alternate slates of electors to create a pretext for Pence to reject votes on Jan 6.',
                insight: null
            },
            {
                id: 'nov_kraken', phase: 1, date: 'Late Nov 2020',
                title: 'The "Kraken" Lawsuits',
                text: 'Sidney Powell files lawsuits alleging vast conspiracies involving Dominion Voting Systems, Venezuela, and Hugo Chávez. Though dismissed by courts, these claims radicalize a portion of the electorate.',
                insight: null
            },
            {
                id: 'dec1', phase: 1, date: 'Dec 1, 2020',
                title: 'Barr Breaks with Trump',
                text: 'AG Bill Barr tells the AP the DOJ has found "no evidence of widespread fraud." In a heated White House meeting, Barr tells Trump his theories are "bullshit" and "idiotic." Barr resigns shortly after.',
                insight: {
                    who: 'Bill Barr (Attorney General)',
                    knew: 'The fraud claims were "rubbish" and "crazy stuff."',
                    did: 'Publicly debunked the claims and resigned rather than use the DOJ to overturn the election.'
                }
            },
            {
                id: 'dec14', phase: 1, date: 'Dec 14, 2020',
                title: 'Fake Electors Convene',
                text: 'While legitimate electors certify Biden\'s win, groups of Republicans in 7 swing states meet to sign false certificates declaring themselves "duly elected." This was centrally coordinated by Giuliani and Meadows.',
                insight: null
            },
            {
                id: 'dec18', phase: 1, date: 'Dec 18, 2020',
                title: 'The "Unhinged" Meeting',
                text: 'A screaming match erupts in the Oval Office between White House Counsel (Cipollone/Herschmann) and outside advisors (Flynn/Powell/Byrne). The outsiders propose seizing voting machines using the military. The meeting lasts until midnight.',
                insight: {
                    who: 'Pat Cipollone (White House Counsel)',
                    knew: 'The outside advisors were "not giving Trump good advice" and the theories were "nuts."',
                    did: 'Physically blocked the drafting of orders to seize voting machines.'
                }
            },
            {
                id: 'dec19', phase: 1, date: 'Dec 19, 2020', time: '1:42 AM',
                title: 'The Summoning Tweet',
                text: 'Minutes after the unhinged meeting ends, Trump tweets: "Statistically impossible to have lost the 2020 Election. Big protest in D.C. on January 6th. Be there, will be wild!". Online forums immediately pivot to planning for violence.',
                insight: {
                    who: 'Extremist Groups (Oath Keepers)',
                    knew: 'This was a call to action.',
                    did: 'Began logistical planning for a "war," discussing weapons transport and tactics.'
                }
            },
            {
                id: 'jan2', phase: 1, date: 'Jan 2, 2021',
                title: 'The Raffensperger Call',
                text: 'Trump pressures Georgia Sec. of State Brad Raffensperger in a recorded call: "I just want to find 11,780 votes." He threatens Raffensperger with criminal liability if he refuses.',
                insight: {
                    who: 'Donald Trump',
                    knew: 'He had lost Georgia multiple times (machine count, hand recount).',
                    did: 'Explicitly asked an official to "find" the exact number of votes needed to win by one.'
                }
            },
            {
                id: 'jan4', phase: 1, date: 'Jan 4, 2021',
                title: 'Miller\'s "Optics" Memo',
                text: 'Acting SecDef Christopher Miller issues a memo restricting the D.C. National Guard. It prohibits riot control agents or QRF deployment without his personal sign-off, fearing "optics" after the 2020 summer protests.',
                insight: {
                    who: 'Pentagon Leadership',
                    knew: 'Intel reports indicated potential violence.',
                    did: 'Created a bureaucratic bottleneck that would delay the response on Jan 6 by hours.'
                }
            },
            {
                id: 'jan5', phase: 1, date: 'Jan 5, 2021',
                title: 'The "Murder-Suicide Pact"',
                text: 'Trump and John Eastman pressure Pence to adopt a plan to reject electors. White House lawyer Eric Herschmann warns Eastman: "You\'re going to cause riots in the streets." Cipollone calls it a "murder-suicide pact."',
                insight: null
            },

            // --- PHASE 2: THE ATTACK (MINUTE BY MINUTE) ---
            {
                id: 'j6-0100', phase: 2, date: 'Jan 6', time: '1:00 AM',
                title: 'Pressure on Pence Continues',
                text: 'Trump tweets: "If Vice President @Mike_Pence comes through for us, we will win the Presidency."',
                insight: null
            },
            {
                id: 'j6-0817', phase: 2, date: 'Jan 6', time: '8:17 AM',
                title: 'Trump Sets the Target',
                text: 'Trump tweets: "All Mike Pence has to do is send them back to the States... Do it Mike, this is a time for extreme courage!" This sets the strategic objective for the crowd.',
                insight: null
            },
            {
                id: 'j6-1030', phase: 2, date: 'Jan 6', time: '10:30 AM',
                title: 'Proud Boys Reconnaissance',
                text: '200-300 Proud Boys leave the rally early. They do not stay for the speech. They march to the Capitol to identify weak points in the police perimeter.',
                insight: null
            },
            {
                id: 'j6-1150', phase: 2, date: 'Jan 6', time: '11:50 AM',
                title: '"Take the F---ing Mags Away"',
                text: 'Informed that the crowd is small because people with weapons won\'t pass through metal detectors, Trump yells: "I don\'t f---ing care that they have weapons. They\'re not here to hurt me. Take the f---ing mags away."',
                insight: {
                    who: 'Donald Trump',
                    knew: 'The crowd was armed with pistols, knives, and body armor.',
                    did: 'Ordered security to stand down so the armed crowd could get closer to him, then directed them to the Capitol.'
                }
            },
            {
                id: 'j6-1200', phase: 2, date: 'Jan 6', time: '12:00 PM',
                title: 'Trump Takes the Stage',
                text: 'Trump tells the crowd to "fight like hell" or they "won\'t have a country anymore". He falsely promises to march with them to the Capitol.',
                image: 'https://upload.wikimedia.org/wikipedia/commons/7/7b/2021_United_States_Capitol_VOA_1.jpg',
                caption: 'Trump speaking at the Ellipse (VOA/Public Domain)',
                insight: null
            },
            {
                id: 'j6-1253', phase: 2, date: 'Jan 6', time: '12:53 PM',
                title: 'The Outer Perimeter Breached',
                text: 'While Trump is still speaking, the Proud Boys-led vanguard overruns the thin police line on the West side. The "riot" effectively begins before the speech ends.',
                image: 'https://upload.wikimedia.org/wikipedia/commons/4/4f/2021_storming_of_the_United_States_Capitol_DSC09254-2_%2850820534063%29_%28retouched%29.jpg',
                caption: 'The crowd gathers at the perimeter (Tyler Merbler/CC BY 2.0)',
                insight: null
            },
            {
                id: 'j6-1300', phase: 2, date: 'Jan 6', time: '1:00 PM',
                title: 'Joint Session Convenes',
                text: 'Pence releases a letter stating he lacks authority to reject votes. The Joint Session begins. Meanwhile, pipe bombs are found at the RNC/DNC, diverting police resources.',
                insight: null
            },
            {
                id: 'j6-1325', phase: 2, date: 'Jan 6', time: '1:25 PM',
                title: 'The "187 Minutes" Begins',
                text: 'Trump returns to the White House and watches TV in the dining room. For over 3 hours, he refuses to mobilize aid or issue a statement stopping the violence.',
                insight: null
            },
            {
                id: 'j6-1349', phase: 2, date: 'Jan 6', time: '1:49 PM',
                title: 'Riot Declared',
                text: 'D.C. Police officially declare a riot. Chief Sund calls for National Guard help.',
                insight: null
            },
            {
                id: 'j6-1412', phase: 2, date: 'Jan 6', time: '2:12 PM',
                title: 'Building Breached',
                text: 'Dominic Pezzola (Proud Boys) smashes a window. The first rioters enter.',
                image: 'https://upload.wikimedia.org/wikipedia/commons/3/33/Initial_breach_of_the_Capitol_during_January_6_attack_as_recorded_by_security_camera.png',
                caption: 'Security cam footage of initial breach (USCP/Public Domain)',
                insight: null
            },
            {
                id: 'j6-1413', phase: 2, date: 'Jan 6', time: '2:13 PM',
                title: 'Pence Evacuated',
                text: 'Secret Service rushes Pence from the Senate floor, missing the mob by less than a minute. Officer Goodman lures the mob away from the Senate doors.',
                insight: null
            },
            {
                id: 'j6-1424', phase: 2, date: 'Jan 6', time: '2:24 PM',
                title: 'The Incitement Tweet',
                text: 'Knowing the Capitol is breached, Trump tweets: "Mike Pence didn\'t have the courage to do what should have been done..." The crowd surges, chanting "Hang Mike Pence."',
                insight: {
                    who: 'Donald Trump',
                    knew: 'Pence was in physical danger.',
                    did: 'Targeted him specifically, "pouring gasoline on the fire."'
                }
            },
            {
                id: 'j6-1444', phase: 2, date: 'Jan 6', time: '2:44 PM',
                title: 'Ashli Babbitt Shot',
                text: 'Ashli Babbitt is shot by a police officer while attempting to climb through a broken window into the Speaker\'s Lobby, adjacent to evacuating House members.',
                image: 'https://upload.wikimedia.org/wikipedia/commons/0/04/Attackers_assault_law_enforcement_during_January_6_United_States_Capitol_attack.png',
                caption: 'Violent confrontation at Capitol doors (Jan 6 Cmte/Public Domain)',
                insight: null
            },
            {
                id: 'j6-1504', phase: 2, date: 'Jan 6', time: '3:04 PM',
                title: 'Guard Activated (But Not Deployed)',
                text: 'Acting SecDef Miller approves activation of the Guard, but they are delayed by the need to return to the armory and gear up.',
                insight: null
            },
            {
                id: 'j6-1617', phase: 2, date: 'Jan 6', time: '4:17 PM',
                title: '"Go Home, We Love You"',
                text: 'Trump releases a video: "We love you, you\'re very special... but go home." He maintains the election was stolen.',
                insight: null
            },
            {
                id: 'j6-1632', phase: 2, date: 'Jan 6', time: '4:32 PM',
                title: 'Guard Deployment Authorized',
                text: 'Miller finally authorizes the deployment of the Guard to the Capitol, over an hour after activation.',
                insight: null
            },
            {
                id: 'j6-1740', phase: 2, date: 'Jan 6', time: '5:40 PM',
                title: 'Perimeter Cleared',
                text: 'National Guard troops arrive and clear the perimeter with tear gas.',
                image: 'https://upload.wikimedia.org/wikipedia/commons/f/f9/Tear_Gas_outside_United_States_Capitol_20210106.jpg',
                caption: 'Tear gas and police clearing the perimeter (Tyler Merbler/CC BY 2.0)',
                insight: null
            },
            {
                id: 'j6-2000', phase: 2, date: 'Jan 6', time: '8:00 PM',
                title: 'Capitol Secure',
                text: 'Congress reconvenes. Pence states: "To those who wreaked havoc in our Capitol today, you did not win."',
                insight: null
            },

            // --- PHASE 3: AFTERMATH & REVERSAL ---
            {
                id: 'jan13', phase: 3, date: 'Jan 13, 2021',
                title: 'Second Impeachment',
                text: 'House votes 232–197 to impeach Trump for "Incitement of Insurrection." 10 Republicans join Democrats. He is later acquitted by the Senate (57-43) despite McConnell holding him "morally responsible."',
                insight: null
            },
            {
                id: 'j6comm', phase: 3, date: '2021-2022',
                title: 'Select Committee Investigation',
                text: 'The Jan 6 Committee interviews 1,000+ witnesses. Cassidy Hutchinson testifies about Trump\'s knowledge of weapons. The Committee refers Trump to the DOJ for prosecution.',
                insight: null
            },
            {
                id: 'aug2023', phase: 3, date: 'Aug 2023',
                title: 'The Indictments',
                text: 'Jack Smith indicts Trump for Conspiracy to Defraud the U.S. Fani Willis indicts Trump and 18 others in Georgia under RICO statutes.',
                insight: null
            },
            {
                id: 'july2024', phase: 3, date: 'July 2024',
                title: 'Supreme Court Immunity Ruling',
                text: 'In Trump v. United States, the Supreme Court rules Presidents have absolute immunity for "core constitutional acts." This halts the Jack Smith federal case for months.',
                insight: null
            },
            {
                id: 'nov2024', phase: 3, date: 'Nov 5, 2024',
                title: 'Trump Re-Elected',
                text: 'Trump defeats Kamala Harris (312-226 Electoral Votes). The victory provides a political mandate to dismantle the legal cases against him.',
                insight: null
            },
            {
                id: 'jan2025_doj', phase: 3, date: 'Jan 2025',
                title: 'The Dismantling of Justice',
                text: 'Jack Smith resigns; his cases are dropped. FBI Director Wray resigns; Trump appoints Kash Patel. The Georgia case is dismissed by a new special prosecutor.',
                insight: {
                    who: 'The Executive Branch (2025)',
                    knew: 'The investigations were based on grand jury indictments.',
                    did: 'Dismissed them as "politically motivated" and purged leadership involved in the probes.'
                }
            },
            {
                id: 'jan2025_pardons', phase: 3, date: 'Jan 20, 2025',
                title: 'Mass Pardons',
                text: 'On Day 1, President Trump pardons nearly 1,500 Jan 6 defendants. He commutes the sentences of Proud Boys leader Enrique Tarrio and Oath Keepers leader Stewart Rhodes to "time served."',
                insight: null
            },
            {
                id: 'june2025', phase: 3, date: 'June 2025',
                title: 'Expungement of Impeachment',
                text: 'The House passes H.Res. 25, officially "expunging" the 2021 impeachment for Incitement of Insurrection, declaring it "null and void."',
                insight: null
            },
            {
                id: 'jan2026', phase: 3, date: 'Jan 2026',
                title: 'The New Paradigm',
                text: 'By 2026, the mechanisms of accountability have been dismantled. The "Big Lie" is codified into executive policy, and the attackers are reframed as political martyrs.',
                insight: null
            }
        ];

        // --- References Data ---
        const references = {
            1: "The American Constitutional Crisis: A Definitive Chronology (2020–2026)",
            7: "AP News: Barr says no widespread fraud",
            16: "Select Committee Final Report: The Big Lie",
            26: "DOJ: Capitol Breach Cases Database / Statement of Facts",
            27: "Senate Rules Committee Report on Security Failures",
            31: "Congress.gov: H.Res.24 Impeachment",
            32: "Senate Trial Record: Vote 57-43",
            33: "Cassidy Hutchinson Testimony Transcript",
            35: "Fulton County Superior Court: State of Georgia v. Trump et al.",
            36: "Supreme Court Opinion: Trump v. United States (2024)",
            37: "FEC: Official 2024 General Election Results",
            39: "DOJ Press Release: Conclusion of Special Counsel Office",
            40: "Senate Confirmation Record: Kash Patel",
            43: "White House Proclamation: Jan 6 Pardons (2025)",
            45: "CBS News: 5 Years Later - The Pardons",
            234: "ProPublica: Inside the Creation of the Stolen Election Myth",
            253: "House Admin: Transcripts on Pentagon Directives",
            255: "CNN: Eastman Memo PDF",
            269: "SCOTUS Docket: Peoples Opposition to Stay"
        };

        // --- Initialization ---
        const p1Container = document.getElementById('timeline-p1');
        const p2Container = document.getElementById('timeline-p2');
        const p3Container = document.getElementById('timeline-p3');
        const sourceList = document.getElementById('source-list');
        const insightContainer = document.getElementById('insight-container');
        const scroller = document.getElementById('scroller');
        const playBtn = document.getElementById('playPauseBtn');

        // Image Elements
        const ctxImgBox = document.getElementById('ctx-img-box');
        const ctxImg = document.getElementById('ctx-img');
        const ctxCaption = document.getElementById('ctx-caption');

        let isPlaying = false;
        let autoScrollSpeed = 0.3;
        let animationFrameId;

        // Render Timeline
        function renderTimeline() {
            timelineData.forEach((item, index) => {
                const el = document.createElement('div');
                el.className = `timeline-item ${item.time ? 'minute-item' : ''} ${item.phase === 3 && item.date.includes('202') ? 'future-item' : ''}`;
                el.dataset.index = index;
                el.id = item.id;

                let timeBadge = item.time ? `<span class="timestamp-badge">${item.time}</span>` : '';

                el.innerHTML = `
                <div class="timeline-date">${item.date}</div>
                <div class="timeline-card">
                    <h3>${timeBadge}${item.title}</h3>
                    <p>${item.text}</p>
                </div>
            `;

                if (item.phase === 1) p1Container.appendChild(el);
                else if (item.phase === 2) p2Container.appendChild(el);
                else p3Container.appendChild(el);
            });
        }

        // Render Sources
        function renderSources() {
            let html = '<ul style="list-style: none; padding: 0; column-count: 2;">';
            for (const [key, val] of Object.entries(references)) {
                html += `<li id="${key}" style="margin-bottom:5px; font-size:0.8rem; break-inside: avoid;">
                <strong style="color:var(--accent-blue)">[${key}]</strong> ${val}
            </li>`;
            }
            html += '</ul>';
            sourceList.innerHTML = html;
        }

        // --- Logic & Animation ---

        function togglePlay() {
            isPlaying = !isPlaying;
            playBtn.innerText = isPlaying ? "⏸ Pause" : "▶ Play";
            playBtn.classList.toggle('active', isPlaying);
            if (isPlaying) animate();
        }

        function animate() {
            if (!isPlaying) return;
            scroller.scrollTop += autoScrollSpeed;
            checkVisibility();
            animationFrameId = requestAnimationFrame(animate);
        }

        function jumpTo(id) {
            isPlaying = false;
            playBtn.innerText = "▶ Play";
            playBtn.classList.remove('active');
            const el = document.getElementById(id);
            if (el) el.scrollIntoView({ behavior: 'smooth' });
        }

        // Knowledge/Insight Engine
        function checkVisibility() {
            const viewMiddle = scroller.scrollTop + (scroller.clientHeight / 2.5);
            const items = document.querySelectorAll('.timeline-item');

            let activeItem = null;

            items.forEach(item => {
                const itemTop = item.offsetTop;
                const itemBottom = itemTop + item.offsetHeight;

                // Focus Logic
                if (itemTop <= viewMiddle && itemBottom >= viewMiddle - 300) {
                    activeItem = item;
                }

                if (item === activeItem) item.classList.add('active-focus');
                else item.classList.remove('active-focus');
            });

            if (activeItem) {
                updateContextRail(activeItem.dataset.index);
            }
        }

        function updateContextRail(index) {
            const data = timelineData[index];
            if (!data) return;

            // 1. Handle Images
            if (data.image) {
                // Update image source
                if (ctxImg.dataset.src !== data.image) {
                    ctxImg.dataset.src = data.image; // tracking to avoid flicker
                    ctxImg.src = data.image;
                    ctxCaption.innerText = data.caption || '';
                    ctxImgBox.style.display = 'block';

                    // Fallback if image fails to load
                    ctxImg.onerror = function () {
                        ctxImgBox.style.display = 'none';
                        ctxImg.src = '';
                        ctxImg.dataset.src = '';
                    };
                }
            } else {
                // Hide image box if no image for this event
                ctxImgBox.style.display = 'none';
                ctxImg.src = '';
                ctxImg.dataset.src = '';
                ctxCaption.innerText = '';
            }

            // 2. Handle Text Insight
            const currentTitle = document.getElementById('insight-title');

            if (data.insight) {
                if (currentTitle && currentTitle.innerText === data.insight.who) return;

                const html = `
                <div class="insight-card visible">
                    <div class="insight-header">Knowledge vs. Action Analysis</div>
                    <h2 id="insight-title" style="margin-top:0; color:#212529; font-size:1.4rem; margin-bottom:15px;">${data.insight.who}</h2>
                    <div class="insight-box knew-box">
                        <h5>WHAT THEY KNEW</h5>
                        <p>${data.insight.knew}</p>
                    </div>
                    <div class="insight-box did-box">
                        <h5>WHAT THEY DID</h5>
                        <p>${data.insight.did}</p>
                    </div>
                </div>
            `;
                insightContainer.innerHTML = html;
            } else {
                // Show default message when no insight
                insightContainer.innerHTML = `
                <div style="text-align: center; color: #adb5bd; margin-top: 100px;">
                    <p style="font-size: 1.1rem; margin-bottom: 10px;">Waiting for Timeline...</p>
                    <p style="font-size: 0.9rem;">As events scroll, context on what figures <strong>KNEW</strong> vs what they <strong>DID</strong> will appear here.</p>
                </div>
            `;
            }
        }

        // Input Listeners
        scroller.addEventListener('scroll', () => { checkVisibility(); });
        scroller.addEventListener('wheel', () => { if (isPlaying) togglePlay(); });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowDown') {
                scroller.scrollTop += 50;
                if (isPlaying) togglePlay();
            } else if (e.key === 'ArrowUp') {
                scroller.scrollTop -= 50;
                if (isPlaying) togglePlay();
            } else if (e.key === ' ') {
                e.preventDefault();
                togglePlay();
            }
        });

        // Start
        renderTimeline();
        renderSources();
        setTimeout(togglePlay, 1000);

    </script>

</body>

</html>